export default function dropDown(){const t=document.querySelectorAll(".drop_down"),e=document.querySelector(".wrapper");let s=[];function o(){Array.from(s).forEach(t=>{const s=t.target,o=t.block,r=t.wrapper;if(r.classList.contains("is-active")){let t=o.offsetHeight,i=o.offsetWidth,n={y:r.getBoundingClientRect().top+window.scrollY,x:r.getBoundingClientRect().left+window.scrollX};n.x>=i&&n.x<window.innerWidth-i?(o.style.setProperty("--x",n.x+s.offsetWidth/2+"px"),o.style.setProperty("--transform","translate3d(-50%,0,0)")):n.x+15>window.innerWidth-i?(o.style.setProperty("--x",n.x-window.innerWidth/14+"px"),o.style.setProperty("--transform","translate3d(0,0,0)")):n.x<=i&&(o.style.setProperty("--x",n.x+"px"),o.style.setProperty("--transform","translate3d(0,0,0)")),s.getBoundingClientRect().bottom+t>=e.offsetHeight?o.style.setProperty("--y",n.y-t-9+"px"):s.getBoundingClientRect().bottom+t<e.offsetHeight&&o.style.setProperty("--y",n.y+s.offsetHeight+9+"px")}})}t.forEach(t=>{const e=t.querySelector(".drop_down__target"),o=t.querySelector(".drop_down__block");s.push({wrapper:t,target:e,block:o}),document.body.append(o)}),Array.from(s).forEach(t=>{const o=t.target,r=t.block,i=t.wrapper;o.addEventListener("click",(function(){if(!o.classList.contains("is-animating")){o.classList.add("is-animating"),r.style.setProperty("--max-width",2*o.offsetWidth+"px");let t=r.offsetHeight,n=r.offsetWidth,a={y:i.getBoundingClientRect().top+window.scrollY,x:i.getBoundingClientRect().left+window.scrollX};o.closest(".drop_down.is-active")?(r.classList.remove("fade-in"),r.classList.add("fade-out"),i.classList.remove("is-active"),setTimeout(()=>{r.style.removeProperty("left"),r.style.removeProperty("top"),r.style.removeProperty("transform"),r.classList.remove("fade-out"),o.classList.remove("is-animating")},300)):(Array.from(s).forEach(t=>{t.target;const e=t.block,s=t.wrapper;s.classList.contains("is-active")&&(e.classList.remove("fade-in"),e.classList.add("fade-out"),s.classList.remove("is-active"),setTimeout(()=>{e.style.removeProperty("left"),e.style.removeProperty("top"),e.style.removeProperty("transform"),e.classList.remove("fade-out"),s.classList.remove("is-animating")},300))}),r.style.display="none",a.x>=n&&a.x<window.innerWidth-n?(r.style.setProperty("--x",a.x+o.offsetWidth/2+"px"),r.style.setProperty("--transform","translate3d(-50%,0,0)")):a.x+15>window.innerWidth-n?(r.style.setProperty("--x",a.x-window.innerWidth/14+"px"),r.style.setProperty("--transform","translate3d(0,0,0)")):a.x<=n&&(r.style.setProperty("--x",a.x+"px"),r.style.setProperty("--transform","translate3d(0,0,0)")),o.getBoundingClientRect().bottom+t>=e.offsetHeight?r.style.setProperty("--y",a.y-t-9+"px"):o.getBoundingClientRect().bottom+t<e.offsetHeight&&r.style.setProperty("--y",a.y+o.offsetHeight+9+"px"),r.style.removeProperty("display"),i.classList.add("is-active"),r.classList.add("fade-in"),o.classList.remove("is-animating"))}}))}),window.addEventListener("resize",o),window.addEventListener("scroll",o),document.body.addEventListener("mousedown",(function(t){t.target.closest(".drop_down.is-active")||t.target.closest(".drop_down__block")||Array.from(s).forEach(t=>{const e=t.target,s=t.wrapper,o=t.block;s.classList.contains("is-active")&&(o.classList.remove("fade-in"),o.classList.add("fade-out"),s.classList.remove("is-active"),setTimeout(()=>{o.style.removeProperty("--x"),o.style.removeProperty("--y"),o.style.removeProperty("--transform"),o.classList.remove("fade-out"),e.classList.remove("is-animating")},300))})}))}